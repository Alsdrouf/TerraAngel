--- src/Terraria/Terraria/MessageBuffer.cs
+++ src/TerraAngel/Terraria/MessageBuffer.cs
@@ -3,6 +_,7 @@
 using System.IO;
 using Microsoft.Xna.Framework;
 using Microsoft.Xna.Framework.Graphics.PackedVector;
+using TerraAngel;
 using Terraria.Audio;
 using Terraria.Chat;
 using Terraria.DataStructures;
@@ -3806,62 +_,65 @@
                 break;
             case 102:
                 {
+                    if (!TerraAngel.ClientLoader.Config.DisableNebulaLagPacket)
+                    {
-                    int num48 = reader.ReadByte();
+                        int num48 = reader.ReadByte();
-                    ushort num49 = reader.ReadUInt16();
+                        ushort num49 = reader.ReadUInt16();
-                    Vector2 other = reader.ReadVector2();
+                        Vector2 other = reader.ReadVector2();
-                    if (Main.netMode == 2)
+                        if (Main.netMode == 2)
-                    {
+                        {
-                        num48 = whoAmI;
+                            num48 = whoAmI;
-                        NetMessage.TrySendData(102, -1, -1, null, num48, (int)num49, other.X, other.Y);
+                            NetMessage.TrySendData(102, -1, -1, null, num48, (int)num49, other.X, other.Y);
-                        break;
+                            break;
-                    }
+                        }
 
-                    Player player3 = Main.player[num48];
+                        Player player3 = Main.player[num48];
-                    for (int n = 0; n < 255; n++)
+                        for (int n = 0; n < 255; n++)
-                    {
+                        {
-                        Player player4 = Main.player[n];
+                            Player player4 = Main.player[n];
-                        if (!player4.active || player4.dead || (player3.team != 0 && player3.team != player4.team) || !(player4.Distance(other) < 700f))
+                            if (!player4.active || player4.dead || (player3.team != 0 && player3.team != player4.team) || !(player4.Distance(other) < 700f))
-                        {
+                            {
-                            continue;
+                                continue;
-                        }
+                            }
 
-                        Vector2 value3 = player3.Center - player4.Center;
+                            Vector2 value3 = player3.Center - player4.Center;
-                        Vector2 vector3 = Vector2.Normalize(value3);
+                            Vector2 vector3 = Vector2.Normalize(value3);
-                        if (!vector3.HasNaNs())
+                            if (!vector3.HasNaNs())
-                        {
+                            {
-                            int type6 = 90;
+                                int type6 = 90;
-                            float num50 = 0f;
+                                float num50 = 0f;
-                            float num51 = (float)Math.PI / 15f;
+                                float num51 = (float)Math.PI / 15f;
-                            Vector2 spinningpoint = new Vector2(0f, -8f);
+                                Vector2 spinningpoint = new Vector2(0f, -8f);
-                            Vector2 vector4 = new Vector2(-3f);
+                                Vector2 vector4 = new Vector2(-3f);
-                            float num52 = 0f;
+                                float num52 = 0f;
-                            float num53 = 0.005f;
+                                float num53 = 0.005f;
-                            switch (num49)
+                                switch (num49)
-                            {
+                                {
-                                case 179:
+                                    case 179:
-                                    type6 = 86;
+                                        type6 = 86;
-                                    break;
+                                        break;
-                                case 173:
+                                    case 173:
-                                    type6 = 90;
+                                        type6 = 90;
-                                    break;
+                                        break;
-                                case 176:
+                                    case 176:
-                                    type6 = 88;
+                                        type6 = 88;
-                                    break;
+                                        break;
-                            }
+                                }
 
-                            for (int num54 = 0; (float)num54 < value3.Length() / 6f; num54++)
+                                for (int num54 = 0; (float)num54 < value3.Length() / 6f; num54++)
-                            {
+                                {
-                                Vector2 position = player4.Center + 6f * (float)num54 * vector3 + spinningpoint.RotatedBy(num50) + vector4;
+                                    Vector2 position = player4.Center + 6f * (float)num54 * vector3 + spinningpoint.RotatedBy(num50) + vector4;
-                                num50 += num51;
+                                    num50 += num51;
-                                int num55 = Dust.NewDust(position, 6, 6, type6, 0f, 0f, 100, default(Color), 1.5f);
+                                    int num55 = Dust.NewDust(position, 6, 6, type6, 0f, 0f, 100, default(Color), 1.5f);
-                                Main.dust[num55].noGravity = true;
+                                    Main.dust[num55].noGravity = true;
-                                Main.dust[num55].velocity = Vector2.Zero;
+                                    Main.dust[num55].velocity = Vector2.Zero;
-                                num52 = (Main.dust[num55].fadeIn = num52 + num53);
+                                    num52 = (Main.dust[num55].fadeIn = num52 + num53);
-                                Main.dust[num55].velocity += vector3 * 1.5f;
+                                    Main.dust[num55].velocity += vector3 * 1.5f;
+                                }
                             }
-                        }
 
-                        player4.NebulaLevelup(num49);
+                            player4.NebulaLevelup(num49);
+                        }
                     }
 
                     break;
@@ -4065,6 +_,11 @@
                         if (Main.netMode == 2)
                         {
                             NetMessage.SendPlayerHurt(num224, playerDeathReason2, damage3, num225, flag13, pvp2, num226, -1, whoAmI);
+                        }
+
+                        if (damage3 == 1 && playerDeathReason2._sourceNPCIndex == 203)
+                        {
+                            Main.player[num224].TerraAngelUser = true;
                         }
                     }
 
